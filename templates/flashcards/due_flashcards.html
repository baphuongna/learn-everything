{% extends 'base/base.html' %}

{% block title %}Flashcards Cần Ôn Tập - Nền Tảng Học Tập{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-12">
        <h1 class="mb-3">Flashcards Cần Ôn Tập Hôm Nay</h1>
        <p class="lead">Ôn tập các flashcard đến hạn để tăng cường trí nhớ dài hạn</p>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-12">
        <div class="card bg-light">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h4>Tổng số flashcard cần ôn tập: {{ total_due }}</h4>
                        <p>Hãy ôn tập đều đặn để đạt hiệu quả học tập tốt nhất.</p>
                    </div>
                    <div class="col-md-4 text-end">
                        <a href="{% url 'flashcard_list' %}" class="btn btn-outline-primary">Quay Lại Danh Sách</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% if flashcard_sets %}
<div class="row">
    {% for flashcard_set_info in flashcard_sets %}
    <div class="col-md-6 mb-4">
        <div class="card h-100">
            <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">{{ flashcard_set_info.set.title }}</h5>
                <span class="badge bg-light text-dark">{{ flashcard_set_info.count }} flashcard</span>
            </div>
            <div class="card-body">
                <p><strong>Bài học:</strong> {{ flashcard_set_info.set.lesson.title }}</p>
                <p><strong>Chủ đề:</strong> {{ flashcard_set_info.set.lesson.topic.subject.name }}</p>
                <p>{{ flashcard_set_info.set.description|truncatewords:20 }}</p>
                
                <h6 class="mt-3">Flashcards cần ôn tập:</h6>
                <ul class="list-group">
                    {% for flashcard in flashcard_set_info.flashcards|slice:":3" %}
                    <li class="list-group-item">{{ flashcard.front|truncatechars:50 }}</li>
                    {% endfor %}
                    {% if flashcard_set_info.flashcards|length > 3 %}
                    <li class="list-group-item text-muted">... và {{ flashcard_set_info.flashcards|length|add:"-3" }} flashcard khác</li>
                    {% endif %}
                </ul>
            </div>
            <div class="card-footer bg-white border-top-0">
                <a href="{% url 'flashcard_set_detail' flashcard_set_info.set.id %}" class="btn btn-primary">Ôn Tập Ngay</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="row">
    <div class="col-md-12">
        <div class="alert alert-success">
            <h4 class="alert-heading">Chúc mừng!</h4>
            <p>Bạn không có flashcard nào cần ôn tập hôm nay. Hãy quay lại vào ngày mai hoặc học thêm các bộ flashcard mới.</p>
        </div>
    </div>
</div>
{% endif %}

<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">Mẹo Ôn Tập Hiệu Quả</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h5><i class="fas fa-clock text-primary"></i> Ôn Tập Đúng Thời Điểm</h5>
                        <p>Hãy ôn tập flashcard vào thời điểm được gợi ý để tối ưu hóa hiệu quả học tập. Việc ôn tập đúng thời điểm sẽ giúp bạn ghi nhớ thông tin lâu hơn với ít nỗ lực hơn.</p>
                    </div>
                    <div class="col-md-6">
                        <h5><i class="fas fa-brain text-primary"></i> Đánh Giá Trung Thực</h5>
                        <p>Hãy đánh giá trung thực mức độ nhớ của bạn khi ôn tập. Điều này giúp hệ thống lên lịch ôn tập phù hợp với nhu cầu của bạn.</p>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-md-6">
                        <h5><i class="fas fa-chart-line text-primary"></i> Học Đều Đặn</h5>
                        <p>Học 15-20 phút mỗi ngày hiệu quả hơn nhiều so với học dồn 2-3 giờ một tuần. Hãy duy trì thói quen ôn tập đều đặn.</p>
                    </div>
                    <div class="col-md-6">
                        <h5><i class="fas fa-lightbulb text-primary"></i> Tạo Liên Kết</h5>
                        <p>Khi học một thông tin mới, hãy cố gắng liên kết nó với kiến thức bạn đã biết. Điều này giúp tạo ra các kết nối thần kinh mạnh mẽ hơn và cải thiện khả năng ghi nhớ.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
