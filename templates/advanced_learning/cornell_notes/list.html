{% extends 'base/base.html' %}
{% load static %}

{% block title %}Ghi Chú Cornell - Nền Tảng Học Tập{% endblock %}

{% block extra_css %}
<style>
    .note-card {
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
        margin-bottom: 15px;
        border-left: 4px solid #007bff;
    }
    
    .note-card:hover {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transform: translateY(-2px);
    }
    
    .note-title {
        font-weight: 600;
        color: #007bff;
    }
    
    .note-meta {
        font-size: 0.85rem;
        color: #6c757d;
    }
    
    .note-content {
        max-height: 100px;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
    }
    
    .search-card {
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
    }
    
    .empty-state {
        text-align: center;
        padding: 40px 20px;
    }
    
    .empty-state i {
        font-size: 4rem;
        color: #dee2e6;
        margin-bottom: 20px;
    }
</style>
{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-8">
        <h1 class="mb-3">
            <i class="fas fa-edit text-primary"></i> Ghi Chú Cornell
        </h1>
        <p class="lead">Phương pháp ghi chú Cornell giúp bạn tổ chức thông tin một cách có cấu trúc và cải thiện khả năng ghi nhớ.</p>
    </div>
    <div class="col-md-4 text-end">
        <a href="{% url 'advanced_learning:cornell_note_create' %}" class="btn btn-primary">
            <i class="fas fa-plus"></i> Tạo Ghi Chú Mới
        </a>
    </div>
</div>

<!-- Tìm kiếm và lọc -->
<div class="card search-card mb-4">
    <div class="card-body">
        <form method="get" class="row g-3">
            <div class="col-md-6">
                <div class="input-group">
                    <input type="text" class="form-control" name="search" placeholder="Tìm kiếm ghi chú..." value="{{ search_query }}">
                    <button class="btn btn-primary" type="submit">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
            <div class="col-md-4">
                <select class="form-select" name="subject" onchange="this.form.submit()">
                    <option value="">Tất cả chủ đề</option>
                    {% for subject in subjects %}
                    <option value="{{ subject.id }}" {% if selected_subject == subject.id|stringformat:"i" %}selected{% endif %}>
                        {{ subject.name }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-2">
                {% if search_query or selected_subject %}
                <a href="{% url 'advanced_learning:cornell_note_list' %}" class="btn btn-outline-secondary w-100">
                    <i class="fas fa-times"></i> Xóa bộ lọc
                </a>
                {% endif %}
            </div>
        </form>
    </div>
</div>

<!-- Danh sách ghi chú -->
<div class="row">
    <div class="col-md-12">
        {% if notes %}
            {% for note in notes %}
            <div class="card note-card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-8">
                            <h5 class="note-title">{{ note.title }}</h5>
                            <p class="note-meta">
                                {% if note.subject %}
                                <span class="badge bg-primary">{{ note.subject.name }}</span>
                                {% endif %}
                                {% if note.topic %}
                                <span class="badge bg-secondary">{{ note.topic.name }}</span>
                                {% endif %}
                                {% if note.lesson %}
                                <span class="badge bg-info">{{ note.lesson.title }}</span>
                                {% endif %}
                                <span class="ms-2"><i class="far fa-calendar-alt"></i> {{ note.created_at|date:"d/m/Y H:i" }}</span>
                            </p>
                            <div class="note-content">
                                {{ note.main_notes|truncatechars:200 }}
                            </div>
                        </div>
                        <div class="col-md-4 text-end d-flex align-items-center justify-content-end">
                            <a href="{% url 'advanced_learning:cornell_note_detail' note_id=note.id %}" class="btn btn-outline-primary me-2">
                                <i class="fas fa-eye"></i> Xem
                            </a>
                            <a href="{% url 'advanced_learning:cornell_note_edit' note_id=note.id %}" class="btn btn-outline-secondary me-2">
                                <i class="fas fa-edit"></i> Sửa
                            </a>
                            <a href="{% url 'advanced_learning:cornell_note_delete' note_id=note.id %}" class="btn btn-outline-danger">
                                <i class="fas fa-trash"></i> Xóa
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="card">
                <div class="card-body empty-state">
                    <i class="fas fa-edit"></i>
                    <h4>Không có ghi chú nào</h4>
                    <p class="text-muted">Bạn chưa có ghi chú Cornell nào. Hãy tạo ghi chú đầu tiên của bạn!</p>
                    <a href="{% url 'advanced_learning:cornell_note_create' %}" class="btn btn-primary mt-3">
                        <i class="fas fa-plus"></i> Tạo Ghi Chú Mới
                    </a>
                </div>
            </div>
        {% endif %}
    </div>
</div>

<!-- Thông tin về phương pháp Cornell -->
<div class="row mt-5">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-info-circle"></i> Về Phương Pháp Ghi Chú Cornell</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h5>Phương pháp Cornell là gì?</h5>
                        <p>Phương pháp ghi chú Cornell được phát triển bởi Walter Pauk, giáo sư tại Đại học Cornell vào những năm 1950. Đây là một hệ thống ghi chú có cấu trúc giúp sinh viên tổ chức thông tin một cách hiệu quả và cải thiện khả năng ghi nhớ.</p>
                    </div>
                    <div class="col-md-6">
                        <h5>Cấu trúc của ghi chú Cornell:</h5>
                        <ol>
                            <li><strong>Cột gợi ý (Cue Column):</strong> Phần bên trái (khoảng 1/3 trang) dùng để ghi các từ khóa, câu hỏi, hoặc gợi ý.</li>
                            <li><strong>Ghi chú chính (Note-taking Area):</strong> Phần bên phải (khoảng 2/3 trang) dùng để ghi chép nội dung chính.</li>
                            <li><strong>Phần tóm tắt (Summary Area):</strong> Phần dưới cùng của trang dùng để tóm tắt nội dung chính.</li>
                        </ol>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-md-12">
                        <h5>Lợi ích:</h5>
                        <ul>
                            <li>Tổ chức thông tin một cách có cấu trúc</li>
                            <li>Tạo điều kiện cho việc ôn tập và ghi nhớ</li>
                            <li>Khuyến khích tư duy phản biện thông qua việc đặt câu hỏi</li>
                            <li>Cải thiện khả năng tóm tắt và tổng hợp thông tin</li>
                            <li>Giúp xác định các ý chính và mối quan hệ giữa các khái niệm</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
